"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/movies";
exports.ids = ["pages/api/movies"];
exports.modules = {

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmovies&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmovies%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmovies&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmovies%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_movies_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\movies\\index.ts */ \"(api)/./pages/api/movies/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_movies_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_movies_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/movies\",\n        pathname: \"/api/movies\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_movies_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm1vdmllcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDbW92aWVzJTVDaW5kZXgudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHVEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx1REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb3ZpZS1yZXZpZXctd2Vic2l0ZS8/MWVjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXG1vdmllc1xcXFxpbmRleC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21vdmllc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21vdmllc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmovies&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmovies%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserFromSession: () => (/* binding */ getUserFromSession),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, account }) {\n            if (account) {\n                token.accessToken = account.access_token;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            session.accessToken = token.accessToken;\n            const adminEmails = process.env.ADMIN_EMAILS?.split(\",\") || [];\n            session.isAdmin = adminEmails.includes(session.user?.email || \"\");\n            return session;\n        }\n    }\n};\nasync function requireAuth(req, res) {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, authOptions);\n    if (!session) {\n        res.status(401).json({\n            error: \"Unauthorized\"\n        });\n        return false;\n    }\n    return session;\n}\nasync function requireAdmin(req, res) {\n    const session = await requireAuth(req, res);\n    if (!session) return false;\n    // For now, check if email is in a hardcoded admin list\n    // In production, this would check the user's role from database\n    const adminEmails = process.env.ADMIN_EMAILS?.split(\",\") || [];\n    if (!adminEmails.includes(session.user?.email || \"\")) {\n        res.status(403).json({\n            error: \"Admin access required\"\n        });\n        return false;\n    }\n    return session;\n}\nasync function getUserFromSession(req, res) {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, authOptions);\n    return session?.user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZDO0FBQ1c7QUFFeEQsTUFBTUUsY0FBYztJQUNsQkMsV0FBVztRQUNURixpRUFBY0EsQ0FBQztZQUNiRyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtZQUN0Q0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0I7UUFDaEQ7S0FDRDtJQUNEQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBTztZQUMvQixJQUFJQSxTQUFTO2dCQUNYRCxNQUFNRSxXQUFXLEdBQUdELFFBQVFFLFlBQVk7WUFDMUM7WUFDQSxPQUFPSDtRQUNUO1FBQ0EsTUFBTUksU0FBUSxFQUFFQSxPQUFPLEVBQUVKLEtBQUssRUFBTztZQUNuQ0ksUUFBUUYsV0FBVyxHQUFHRixNQUFNRSxXQUFXO1lBQ3ZDLE1BQU1HLGNBQWNaLFFBQVFDLEdBQUcsQ0FBQ1ksWUFBWSxFQUFFQyxNQUFNLFFBQVEsRUFBRTtZQUM5REgsUUFBUUksT0FBTyxHQUFHSCxZQUFZSSxRQUFRLENBQUNMLFFBQVFNLElBQUksRUFBRUMsU0FBUztZQUM5RCxPQUFPUDtRQUNUO0lBQ0Y7QUFDRjtBQUVPLGVBQWVRLFlBQVlDLEdBQVEsRUFBRUMsR0FBUTtJQUNsRCxNQUFNVixVQUFVLE1BQU1oQiwyREFBZ0JBLENBQUN5QixLQUFLQyxLQUFLeEI7SUFDakQsSUFBSSxDQUFDYyxTQUFTO1FBQ1pVLElBQUlDLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFlO1FBQzdDLE9BQU87SUFDVDtJQUNBLE9BQU9iO0FBQ1Q7QUFFTyxlQUFlYyxhQUFhTCxHQUFRLEVBQUVDLEdBQVE7SUFDbkQsTUFBTVYsVUFBVSxNQUFNUSxZQUFZQyxLQUFLQztJQUN2QyxJQUFJLENBQUNWLFNBQVMsT0FBTztJQUVyQix1REFBdUQ7SUFDdkQsZ0VBQWdFO0lBQ2hFLE1BQU1DLGNBQWNaLFFBQVFDLEdBQUcsQ0FBQ1ksWUFBWSxFQUFFQyxNQUFNLFFBQVEsRUFBRTtJQUM5RCxJQUFJLENBQUNGLFlBQVlJLFFBQVEsQ0FBQ0wsUUFBUU0sSUFBSSxFQUFFQyxTQUFTLEtBQUs7UUFDcERHLElBQUlDLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtRQUN0RCxPQUFPO0lBQ1Q7SUFFQSxPQUFPYjtBQUNUO0FBRU8sZUFBZWUsbUJBQW1CTixHQUFRLEVBQUVDLEdBQVE7SUFDekQsTUFBTVYsVUFBVSxNQUFNaEIsMkRBQWdCQSxDQUFDeUIsS0FBS0MsS0FBS3hCO0lBQ2pELE9BQU9jLFNBQVNNO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW92aWUtcmV2aWV3LXdlYnNpdGUvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnO1xyXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnO1xyXG5cclxuY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBHb29nbGVQcm92aWRlcih7XHJcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEISxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCEsXHJcbiAgICB9KSxcclxuICBdLFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIGFjY291bnQgfTogYW55KSB7XHJcbiAgICAgIGlmIChhY2NvdW50KSB7XHJcbiAgICAgICAgdG9rZW4uYWNjZXNzVG9rZW4gPSBhY2NvdW50LmFjY2Vzc190b2tlbjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH06IGFueSkge1xyXG4gICAgICBzZXNzaW9uLmFjY2Vzc1Rva2VuID0gdG9rZW4uYWNjZXNzVG9rZW47XHJcbiAgICAgIGNvbnN0IGFkbWluRW1haWxzID0gcHJvY2Vzcy5lbnYuQURNSU5fRU1BSUxTPy5zcGxpdCgnLCcpIHx8IFtdO1xyXG4gICAgICBzZXNzaW9uLmlzQWRtaW4gPSBhZG1pbkVtYWlscy5pbmNsdWRlcyhzZXNzaW9uLnVzZXI/LmVtYWlsIHx8ICcnKTtcclxuICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9LFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZUF1dGgocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKTtcclxuICBpZiAoIXNlc3Npb24pIHtcclxuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gc2Vzc2lvbjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBZG1pbihyZXE6IGFueSwgcmVzOiBhbnkpIHtcclxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcmVxdWlyZUF1dGgocmVxLCByZXMpO1xyXG4gIGlmICghc2Vzc2lvbikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAvLyBGb3Igbm93LCBjaGVjayBpZiBlbWFpbCBpcyBpbiBhIGhhcmRjb2RlZCBhZG1pbiBsaXN0XHJcbiAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCBjaGVjayB0aGUgdXNlcidzIHJvbGUgZnJvbSBkYXRhYmFzZVxyXG4gIGNvbnN0IGFkbWluRW1haWxzID0gcHJvY2Vzcy5lbnYuQURNSU5fRU1BSUxTPy5zcGxpdCgnLCcpIHx8IFtdO1xyXG4gIGlmICghYWRtaW5FbWFpbHMuaW5jbHVkZXMoc2Vzc2lvbi51c2VyPy5lbWFpbCB8fCAnJykpIHtcclxuICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0pO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNlc3Npb247XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVNlc3Npb24ocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKTtcclxuICByZXR1cm4gc2Vzc2lvbj8udXNlcjtcclxufSJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiR29vZ2xlUHJvdmlkZXIiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsImNsaWVudElkIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwiYWNjb3VudCIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwic2Vzc2lvbiIsImFkbWluRW1haWxzIiwiQURNSU5fRU1BSUxTIiwic3BsaXQiLCJpc0FkbWluIiwiaW5jbHVkZXMiLCJ1c2VyIiwiZW1haWwiLCJyZXF1aXJlQXV0aCIsInJlcSIsInJlcyIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInJlcXVpcmVBZG1pbiIsImdldFVzZXJGcm9tU2Vzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMovie: () => (/* binding */ addMovie),\n/* harmony export */   addReview: () => (/* binding */ addReview),\n/* harmony export */   deleteReview: () => (/* binding */ deleteReview),\n/* harmony export */   getMovie: () => (/* binding */ getMovie),\n/* harmony export */   getMovies: () => (/* binding */ getMovies),\n/* harmony export */   getReviews: () => (/* binding */ getReviews)\n/* harmony export */ });\nconst getMovies = ()=>{\n    return [];\n};\nconst getMovie = (id)=>{\n    return null;\n};\nconst addMovie = (movie)=>{\n    return \"mock-id\";\n};\nconst getReviews = (movieId)=>{\n    return [];\n};\nconst addReview = (review)=>{\n    return \"mock-review-id\";\n};\nconst deleteReview = (id)=>{\n// mock\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQU8sTUFBTUEsWUFBWTtJQUN2QixPQUFPLEVBQUU7QUFDWCxFQUFFO0FBRUssTUFBTUMsV0FBVyxDQUFDQztJQUN2QixPQUFPO0FBQ1QsRUFBRTtBQUVLLE1BQU1DLFdBQVcsQ0FBQ0M7SUFDdkIsT0FBTztBQUNULEVBQUU7QUFFSyxNQUFNQyxhQUFhLENBQUNDO0lBQ3pCLE9BQU8sRUFBRTtBQUNYLEVBQUU7QUFFSyxNQUFNQyxZQUFZLENBQUNDO0lBQ3hCLE9BQU87QUFDVCxFQUFFO0FBRUssTUFBTUMsZUFBZSxDQUFDUDtBQUMzQixPQUFPO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL21vdmllLXJldmlldy13ZWJzaXRlLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGdldE1vdmllcyA9ICgpID0+IHtcclxuICByZXR1cm4gW107XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TW92aWUgPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZE1vdmllID0gKG1vdmllOiBhbnkpID0+IHtcclxuICByZXR1cm4gJ21vY2staWQnO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFJldmlld3MgPSAobW92aWVJZDogc3RyaW5nKSA9PiB7XHJcbiAgcmV0dXJuIFtdO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFJldmlldyA9IChyZXZpZXc6IGFueSkgPT4ge1xyXG4gIHJldHVybiAnbW9jay1yZXZpZXctaWQnO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVJldmlldyA9IChpZDogc3RyaW5nKSA9PiB7XHJcbiAgLy8gbW9ja1xyXG59OyJdLCJuYW1lcyI6WyJnZXRNb3ZpZXMiLCJnZXRNb3ZpZSIsImlkIiwiYWRkTW92aWUiLCJtb3ZpZSIsImdldFJldmlld3MiLCJtb3ZpZUlkIiwiYWRkUmV2aWV3IiwicmV2aWV3IiwiZGVsZXRlUmV2aWV3Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.ts\n");

/***/ }),

/***/ "(api)/./pages/api/movies/index.ts":
/*!***********************************!*\
  !*** ./pages/api/movies/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(api)/./lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(api)/./lib/auth.ts\");\n\n\nasync function handler(req, res) {\n    if (req.method === \"GET\") {\n        try {\n            const movies = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.getMovies)();\n            res.status(200).json({\n                movies\n            });\n        } catch (error) {\n            console.error(\"Error fetching movies:\", error);\n            res.status(500).json({\n                error: \"Failed to fetch movies\"\n            });\n        }\n    } else if (req.method === \"POST\") {\n        // Create movie (admin only)\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.requireAdmin)(req, res);\n        if (!session) return;\n        try {\n            const { title, year, director, actors, image } = req.body;\n            if (!title || !year || !director) {\n                return res.status(400).json({\n                    error: \"Title, year, and director are required\"\n                });\n            }\n            const movieData = {\n                title,\n                year: parseInt(year),\n                director,\n                actors: actors || [],\n                image: image || null,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            const id = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.addMovie)(movieData);\n            res.status(201).json({\n                message: \"Movie created successfully\",\n                id\n            });\n        } catch (error) {\n            console.error(\"Error creating movie:\", error);\n            res.status(500).json({\n                error: \"Failed to create movie\"\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"POST\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbW92aWVzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNzRDtBQUNMO0FBRWxDLGVBQWVHLFFBQzVCQyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEIsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsSUFBSTtZQUNGLE1BQU1DLFNBQVMsTUFBTVAsa0RBQVNBO1lBQzlCSyxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFRjtZQUFPO1FBQ2hDLEVBQUUsT0FBT0csT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtZQUN4Q0wsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUF5QjtRQUN6RDtJQUNGLE9BQU8sSUFBSU4sSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDaEMsNEJBQTRCO1FBQzVCLE1BQU1NLFVBQVUsTUFBTVYsdURBQVlBLENBQUNFLEtBQUtDO1FBQ3hDLElBQUksQ0FBQ08sU0FBUztRQUVkLElBQUk7WUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdiLElBQUljLElBQUk7WUFFekQsSUFBSSxDQUFDTCxTQUFTLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVTtnQkFDaEMsT0FBT1YsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBeUM7WUFDaEY7WUFFQSxNQUFNUyxZQUFZO2dCQUNoQk47Z0JBQ0FDLE1BQU1NLFNBQVNOO2dCQUNmQztnQkFDQUMsUUFBUUEsVUFBVSxFQUFFO2dCQUNwQkMsT0FBT0EsU0FBUztnQkFDaEJJLFdBQVcsSUFBSUM7Z0JBQ2ZDLFdBQVcsSUFBSUQ7WUFDakI7WUFFQSxNQUFNRSxLQUFLLE1BQU12QixpREFBUUEsQ0FBQ2tCO1lBQzFCZCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFZ0IsU0FBUztnQkFBOEJEO1lBQUc7UUFDbkUsRUFBRSxPQUFPZCxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO1lBQ3ZDTCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQXlCO1FBQ3pEO0lBQ0YsT0FBTztRQUNMTCxJQUFJcUIsU0FBUyxDQUFDLFNBQVM7WUFBQztZQUFPO1NBQU87UUFDdENyQixJQUFJRyxNQUFNLENBQUMsS0FBS21CLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRXZCLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vdmllLXJldmlldy13ZWJzaXRlLy4vcGFnZXMvYXBpL21vdmllcy9pbmRleC50cz9kMTUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBnZXRNb3ZpZXMsIGFkZE1vdmllIH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiJztcclxuaW1wb3J0IHsgcmVxdWlyZUFkbWluIH0gZnJvbSAnLi4vLi4vLi4vbGliL2F1dGgnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXHJcbikge1xyXG4gIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbW92aWVzID0gYXdhaXQgZ2V0TW92aWVzKCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbW92aWVzIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbW92aWVzOicsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBtb3ZpZXMnIH0pO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICAvLyBDcmVhdGUgbW92aWUgKGFkbWluIG9ubHkpXHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcmVxdWlyZUFkbWluKHJlcSwgcmVzKTtcclxuICAgIGlmICghc2Vzc2lvbikgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgdGl0bGUsIHllYXIsIGRpcmVjdG9yLCBhY3RvcnMsIGltYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmICghdGl0bGUgfHwgIXllYXIgfHwgIWRpcmVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUaXRsZSwgeWVhciwgYW5kIGRpcmVjdG9yIGFyZSByZXF1aXJlZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG1vdmllRGF0YSA9IHtcclxuICAgICAgICB0aXRsZSxcclxuICAgICAgICB5ZWFyOiBwYXJzZUludCh5ZWFyKSxcclxuICAgICAgICBkaXJlY3RvcixcclxuICAgICAgICBhY3RvcnM6IGFjdG9ycyB8fCBbXSxcclxuICAgICAgICBpbWFnZTogaW1hZ2UgfHwgbnVsbCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBpZCA9IGF3YWl0IGFkZE1vdmllKG1vdmllRGF0YSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgbWVzc2FnZTogJ01vdmllIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgaWQgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBtb3ZpZTonLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIG1vdmllJyB9KTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQT1NUJ10pO1xyXG4gICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZ2V0TW92aWVzIiwiYWRkTW92aWUiLCJyZXF1aXJlQWRtaW4iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwibW92aWVzIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsInNlc3Npb24iLCJ0aXRsZSIsInllYXIiLCJkaXJlY3RvciIsImFjdG9ycyIsImltYWdlIiwiYm9keSIsIm1vdmllRGF0YSIsInBhcnNlSW50IiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImlkIiwibWVzc2FnZSIsInNldEhlYWRlciIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/movies/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmovies&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cmovies%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();